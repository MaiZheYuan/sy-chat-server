webpackJsonp([1],{"+rSZ":function(t,e){},0:function(t,e){},"6mCr":function(t,e){},"7OR4":function(t,e){},"9SSW":function(t,e){},DuBO:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("VCXJ"),o={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]},r=s("Z0/y")(null,o,!1,null,null,null).exports,i=s("zO6J"),a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("div",{staticClass:"login-wrap"},[s("div",{staticClass:"login-form check-part"},t._l(t.routeList,function(e){return s("span",{staticClass:"sign-btn",class:{"sign-btn-active":e.isActive},domProps:{textContent:t._s(e.tit)},on:{click:function(s){t.checkPage(e)}}})})),t._v(" "),s("router-view",{ref:"signForm"}),t._v(" "),s("div",{staticClass:"login-form"},[s("div",{staticClass:"login-form-child",attrs:{onselectstart:"return false"}},[s("span",{staticClass:"login-btn",on:{click:t.userConfirm}},[t._v("确定")])])])],1)])},staticRenderFns:[]};var l=s("Z0/y")({data:function(){return{curItem:null,routeList:[{tit:"登录",routeName:"signIn",isActive:!0},{tit:"注册",routeName:"signUp",isActive:!1}]}},methods:{checkPage:function(t){this.curItem?this.curItem.isActive=!1:this.normalAllItem(),this.curItem=t,t.isActive=!0,this.$router.push({name:t.routeName})},normalAllItem:function(){this.routeList.forEach(function(t){t.isActive=!1})},userConfirm:function(){this.$refs.signForm.$emit("userConfirm")}}},a,!1,function(t){s("DuBO")},null,null).exports,u=s("3cXf"),c=s.n(u),m=s("rVsN"),d=s.n(m),f={data:function(){return{formModel:[{label:"账号：",tip:"",rule:"",isWarning:!1,value:"",id:"signInNumber"},{label:"密码：",tip:"",rule:"",isWarning:!1,value:"",id:"signInPassword"}],userInfo:null}},methods:{formNoValidate:function(){var t=!0,e={signInNumber:"userId",signInPassword:"password"},s={userId:"",password:""};this.formModel.forEach(function(n){0===n.value.length&&(n.isWarning=!0)&&(t=!1),s[e[n.id]]=n.value}),t&&this.signIn(s)},signIn:function(t){var e=this,s=window.SYRESOURCE.user;this.userInfo=t,this.$http.get(s,{params:t}).then(function(t){e.signInHandle(t).then(e.signInSucceed,e.signInFailed)},function(t){})},signInHandle:function(t){return new d.a(function(e,s){var n;200===(n=t.body.code)?e(t):s(n)})},signInSucceed:function(t){sessionStorage.setItem("userInfo",c()(this.userInfo)),this.$router.push({name:"home"})},signInFailed:function(t){}},mounted:function(){this.$on("userConfirm",this.formNoValidate)}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"login-form",attrs:{id:"sign-in-form"}},t._l(t.formModel,function(e){return s("div",{staticClass:"login-form-child"},[s("label",{staticClass:"login-form-label",attrs:{for:"item.id"},domProps:{textContent:t._s(e.label)}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"login-form-input",class:{"sign-in-warning":e.isWarning},attrs:{type:"text",id:"item.id",placeholder:e.tip},domProps:{value:e.value},on:{input:function(s){s.target.composing||t.$set(e,"value",s.target.value)}}})])}))},staticRenderFns:[]};var p=s("Z0/y")(f,h,!1,function(t){s("9SSW")},null,null).exports,v={data:function(){return{formModel:[{label:"账号：",tip:"8-16位英文与字母组合",rule:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}/,isWarning:!1,value:"",id:"signUpNumber"},{label:"密码：",tip:"8-16位英文与字母组合",rule:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}/,isWarning:!1,value:"",id:"signUpPassword"},{label:"昵称：",tip:"2-4个中文字符",rule:/^[\u4E00-\u9FA5]{2,4}$/,isWarning:!1,value:"",id:"signUpNickName"}],params:null}},methods:{formNoValidate:function(){var t=!0,e={signUpNumber:"userId",signUpPassword:"password",signUpNickName:"nickname"},s={userId:"",password:"",nickname:""};this.formModel.forEach(function(n){(0===n.value.length||!n.rule.test(n.value))&&((n.value="")||(n.isWarning=!0))&&(t=!1),s[e[n.id]]=n.value}),t&&this.signUp(s)},signUp:function(t){var e=this,s=window.SYRESOURCE.user;this.params=t,this.$http.post(s,{params:t}).then(function(t){e.signUpHandle(t).then(e.signUpSucceed,e.signUpFailed)},function(t){})},signUpHandle:function(t){return new d.a(function(e,s){var n;200===(n=t.body.code)?e(t):s(n)})},signUpSucceed:function(){sessionStorage.setItem("userInfo",c()(this.params)),this.params=null,this.$router.push({name:"home"})},signUpFailed:function(t){}},mounted:function(){this.$on("userConfirm",this.formNoValidate)}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"login-form",attrs:{id:"sign-in-form"}},t._l(t.formModel,function(e){return s("div",{staticClass:"login-form-child"},[s("label",{staticClass:"login-form-label",attrs:{for:"item.id"},domProps:{textContent:t._s(e.label)}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"login-form-input",class:{"sign-in-warning":e.isWarning},attrs:{type:"text",id:"item.id",placeholder:e.tip},domProps:{value:e.value},on:{input:function(s){s.target.composing||t.$set(e,"value",s.target.value)}}})])}))},staticRenderFns:[]};var C=s("Z0/y")(v,g,!1,function(t){s("zG/P")},null,null).exports,w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat-room"},[s("h1",{staticClass:"tit",attrs:{id:"room-tit"}}),t._v(" "),s("div",{staticClass:"content"},t._l(t.mesModel,function(e){return s("p",{staticClass:"chat-line"},[s("span",{staticClass:"chat-man",class:{"chat-man-me":e.userId==t.userId},domProps:{textContent:t._s(e.userName)}}),t._v(" "),s("span",{staticClass:"chat-moment",class:{"chat-moment-me":e.userId==t.userId},domProps:{textContent:t._s(e.moment)}}),t._v(" "),s("span",{staticClass:"chat-mess",class:{"chat-mess-me":e.userId==t.userId},domProps:{textContent:t._s(e.message)}})])})),t._v(" "),s("form",{staticClass:"tool"},[s("div",{staticClass:"write-board"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.userMes,expression:"userMes"}],staticClass:"write-box",attrs:{type:"text",name:"write"},domProps:{value:t.userMes},on:{input:function(e){e.target.composing||(t.userMes=e.target.value)}}})]),t._v(" "),s("a",{staticClass:"send",attrs:{href:"javascript:"}},[t._v("发送")])])])},staticRenderFns:[]};var I={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]},_={data:function(){return{listData:[]}},computed:{roomList:function(){return this.listData.reverse()}},methods:{getUserRoomList:function(){var t=this,e=JSON.parse(sessionStorage.getItem("userInfo"));if(!e)return this.$router.push({name:"user"});var s=window.SYRESOURCE.userRooms;this.$http.get(s,{params:e}).then(function(e){200===e.body.code?t.listData=e.body.data:t.errHandle()},function(t){})},errHandle:function(){}},mounted:function(){this.getUserRoomList(),this._$eventBus.$on("roomListRefresh",this.getUserRoomList)}},N={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",t._l(t.roomList,function(e){return s("li",[s("span",{domProps:{textContent:t._s(e)}})])}))},staticRenderFns:[]};var S={data:function(){return{roomName:"",roomPassword:"",toolList:[{tit:"搜索",isActive:!1,action:"search"},{tit:"创建",isActive:!1,action:"create"}],curToolListItem:null,searchResultList:[]}},methods:{toolSelect:function(t){this.curItemDerective(),this.curToolListItem=t,t.isActive=!0,this.searchResultList=[]},curItemDerective:function(){this.curToolListItem&&(this.curToolListItem.isActive=!1),this.curToolListItem=null,this.roomName=null,this.roomPassword=null},isShowCalc:function(t){return this.curToolListItem&&this.curToolListItem.action===t},toolFormConfirm:function(){switch(this.curToolListItem.action){case"create":return this.roomCreate();case"search":return this.roomSearch();default:return!1}},roomCreate:function(){var t=this;if(!this.roomPassword||!this.roomName)return!1;var e=JSON.parse(sessionStorage.getItem("userInfo"));e||this.$router.push({name:"user"});var s=window.SYRESOURCE.rooms,n={roomPassword:this.roomPassword,roomName:this.roomName,userId:e.userId};this.$http.post(s,{params:n}).then(function(e){t.roomCreateHandle(e).then(t.roomCreateSucceed,t.roomCreateFailed)},function(t){})},roomCreateHandle:function(t){return new d.a(function(e,s){var n;200===(n=t.body.code)?e():s(n)})},roomCreateSucceed:function(){this._$eventBus.$emit("roomListRefresh")},roomCreateFailed:function(t){alert("新建失败！")},roomSearch:function(){var t=this;if(!this.roomName)return!1;var e=window.SYRESOURCE.rooms,s={roomName:this.roomName};this.$http.get(e,{params:s}).then(function(e){t.roomSearchHandle(e).then(t.roomSearchSucceed,t.roomSearchFailed)},function(t){})},roomSearchHandle:function(t){return new d.a(function(e,s){var n;200===(n=t.body.code)?e(t):s(n)})},roomSearchSucceed:function(t){this.searchResultList=t.body.data},roomSearchFailed:function(t){alert("搜索失败！")}}},P={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tool-part",on:{mouseleave:t.curItemDerective}},[s("ul",{staticClass:"tool-part-list"},t._l(t.toolList,function(e){return s("li",{staticClass:"tool-part-list-item",class:{active:e.isActive}},[s("span",{domProps:{textContent:t._s(e.tit)},on:{click:function(s){t.toolSelect(e)}}})])})),t._v(" "),s("form",{key:"search",staticClass:"tool-part-form"},[s("div",[s("transition",{attrs:{name:"shrink"}},[s("input",{directives:[{name:"show",rawName:"v-show",value:t.curToolListItem,expression:"curToolListItem"},{name:"model",rawName:"v-model.trim",value:t.roomName,expression:"roomName",modifiers:{trim:!0}}],staticClass:"tool-part-input",attrs:{type:"text",placeholder:"房间名"},domProps:{value:t.roomName},on:{input:function(e){e.target.composing||(t.roomName=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])],1),t._v(" "),s("div",[s("transition",{attrs:{name:"shrink"}},[s("input",{directives:[{name:"show",rawName:"v-show",value:t.isShowCalc("create"),expression:"isShowCalc('create')"},{name:"model",rawName:"v-model.trim",value:t.roomPassword,expression:"roomPassword",modifiers:{trim:!0}}],staticClass:"tool-part-input",attrs:{type:"text",placeholder:"房间口令"},domProps:{value:t.roomPassword},on:{input:function(e){e.target.composing||(t.roomPassword=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])],1),t._v(" "),s("div",{staticClass:"tool-part-form-confirm"},[s("a",{directives:[{name:"show",rawName:"v-show",value:t.curToolListItem,expression:"curToolListItem"}],staticClass:"tool-part-confirm-btn",on:{click:t.toolFormConfirm}},[t._v("确定")])])]),t._v(" "),s("ul",{staticClass:"tool-part-result"},t._l(t.searchResultList,function(e){return s("li",{staticClass:"tool-part-result-item",domProps:{textContent:t._s(e.roomName)}})}))])},staticRenderFns:[]};var $={components:{chatPart:s("Z0/y")({data:function(){return{userId:"ksldfjk",userMes:"",mesModel:[{type:"txt",message:"我的施蒂利克防腐剂圣",userId:"3435",userName:"搜索",moment:"2017/01/02"},{type:"txt",message:"我",userId:"ksldfjk",userName:"搜索",moment:"2017/01/02"}]}}},w,!1,function(t){s("+rSZ")},null,null).exports,navPart:s("Z0/y")({data:function(){return{}}},I,!1,null,null,null).exports,listPart:s("Z0/y")(_,N,!1,function(t){s("g3nj")},null,null).exports,toolPart:s("Z0/y")(S,P,!1,function(t){s("7OR4")},null,null).exports},data:function(){return{}},mounted:function(){document.querySelector("body").style.height=window.innerHeight+"px"}},x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home"},[e("div",{staticClass:"home-room-list"},[e("toolPart"),this._v(" "),e("listPart")],1),this._v(" "),e("div",{staticClass:"home-room-chatting"},[e("div",{staticClass:"home-room-chatting-list"}),this._v(" "),e("div",{staticClass:"home-room-chatting-current"},[e("chatPart")],1)]),this._v(" "),e("div",{staticClass:"home-room-member"})])},staticRenderFns:[]};var b=s("Z0/y")($,x,!1,function(t){s("6mCr")},null,null).exports;n.a.use(i.a);var R=new i.a({routes:[{path:"/",redirect:"/user"},{path:"/user",name:"user",component:l,redirect:"/user/signIn",children:[{path:"signIn",name:"signIn",component:p},{path:"signUp",name:"signUp",component:C}]},{path:"/home",name:"home",component:b}]}),y=s("lLMz");n.a.config.productionTip=!1,n.a.use(y.a),n.a.use({install:function(t){t.prototype._$eventBus=new t}}),new n.a({el:"#app",router:R,components:{App:r},template:"<App/>"})},g3nj:function(t,e){},"zG/P":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.bc773a7c71db07e6fb8a.js.map