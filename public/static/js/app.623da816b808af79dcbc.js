webpackJsonp([1],{0:function(t,e){},Gq62:function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("VCXJ"),n={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]},i=o("Z0/y")(null,n,!1,null,null,null).exports,r=o("zO6J"),a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login"},[o("div",{staticClass:"login-wrap"},[o("div",{staticClass:"login-form check-part"},t._l(t.routeList,function(e){return o("span",{staticClass:"sign-btn",class:{"sign-btn-active":e.isActive},domProps:{textContent:t._s(e.tit)},on:{click:function(o){t.checkPage(e)}}})})),t._v(" "),o("router-view",{ref:"signForm"}),t._v(" "),o("div",{staticClass:"login-form"},[o("div",{staticClass:"login-form-child",attrs:{onselectstart:"return false"}},[o("span",{staticClass:"login-btn",on:{click:t.userConfirm}},[t._v("确定")])])])],1)])},staticRenderFns:[]};var u=o("Z0/y")({data:function(){return{curItem:null,routeList:[{tit:"登录",routeName:"signIn",isActive:!1},{tit:"注册",routeName:"signUp",isActive:!1}]}},methods:{checkPage:function(t){this.curItem?this.curItem.isActive=!1:this.normalAllItem(),this.curItem=t,t.isActive=!0,this.$router.push({name:t.routeName})},normalAllItem:function(){this.routeList.forEach(function(t){t.isActive=!1})},userConfirm:function(){this.$refs.signForm.$emit("userConfirm")}},mounted:function(){var t=this.$route.name;this.routeList.forEach(function(e){e.isActive=e.routeName===t})}},a,!1,function(t){o("iaH8")},null,null).exports,c=o("3cXf"),l=o.n(c),m=o("rVsN"),d=o.n(m),h={data:function(){return{formModel:[{label:"账号：",tip:"",rule:"",isWarning:!1,value:"",id:"signInNumber"},{label:"密码：",tip:"",rule:"",isWarning:!1,value:"",id:"signInPassword"}],userInfo:null}},methods:{formNoValidate:function(){var t=!0,e={signInNumber:"userId",signInPassword:"password"},o={userId:"",password:""};this.formModel.forEach(function(s){0===s.value.length&&(s.isWarning=!0)&&(t=!1),o[e[s.id]]=s.value}),t&&this.signIn(o)},signIn:function(t){var e=this,o=window.SYRESOURCE.user;this.userInfo=t,this.$http.get(o,{params:t}).then(function(t){e.signInHandle(t).then(e.signInSucceed,e.signInFailed)},function(t){})},signInHandle:function(t){return new d.a(function(e,o){200===t.body.code?e(t):o(t)})},signInSucceed:function(t){this.userInfo.nickname=t.body.data.nickname,sessionStorage.setItem("userInfo",l()(this.userInfo)),this.$router.push({name:"home"})},signInFailed:function(t){alert(t.body.data)}},mounted:function(){this.$on("userConfirm",this.formNoValidate)}},f={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("form",{staticClass:"login-form",attrs:{id:"sign-in-form"}},t._l(t.formModel,function(e){return o("div",{staticClass:"login-form-child"},[o("label",{staticClass:"login-form-label",attrs:{for:"item.id"},domProps:{textContent:t._s(e.label)}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"login-form-input",class:{"sign-in-warning":e.isWarning},attrs:{type:"text",id:"item.id",placeholder:e.tip},domProps:{value:e.value},on:{input:function(o){o.target.composing||t.$set(e,"value",o.target.value)}}})])}))},staticRenderFns:[]};var p=o("Z0/y")(h,f,!1,function(t){o("jFyt")},null,null).exports,v={data:function(){return{formModel:[{label:"账号：",tip:"8-16位英文与字母组合",rule:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}/,isWarning:!1,value:"",id:"signUpNumber"},{label:"密码：",tip:"8-16位英文与字母组合",rule:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}/,isWarning:!1,value:"",id:"signUpPassword"},{label:"昵称：",tip:"1-10个字符",rule:/.{1,10}/,isWarning:!1,value:"",id:"signUpNickName"}],params:null}},methods:{formNoValidate:function(){var t=!0,e={signUpNumber:"userId",signUpPassword:"password",signUpNickName:"nickname"},o={userId:"",password:"",nickname:""};this.formModel.forEach(function(s){(0===s.value.length||!s.rule.test(s.value))&&((s.value="")||(s.isWarning=!0))&&(t=!1),o[e[s.id]]=s.value}),t&&this.signUp(o)},signUp:function(t){var e=this,o=window.SYRESOURCE.user;this.params=t,this.$http.post(o,{params:t}).then(function(t){e.signUpHandle(t).then(e.signUpSucceed,e.signUpFailed)},function(t){})},signUpHandle:function(t){return new d.a(function(e,o){200===t.body.code?e(t):o(t)})},signUpSucceed:function(){sessionStorage.setItem("userInfo",l()(this.params)),this.params=null,this.$router.push({name:"home"})},signUpFailed:function(t){alert(t.body.data)}},mounted:function(){this.$on("userConfirm",this.formNoValidate)}},g={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("form",{staticClass:"login-form",attrs:{id:"sign-in-form"}},t._l(t.formModel,function(e){return o("div",{staticClass:"login-form-child"},[o("label",{staticClass:"login-form-label",attrs:{for:"item.id"},domProps:{textContent:t._s(e.label)}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"login-form-input",class:{"sign-in-warning":e.isWarning},attrs:{type:"text",id:"item.id",placeholder:e.tip},domProps:{value:e.value},on:{input:function(o){o.target.composing||t.$set(e,"value",o.target.value)}}})])}))},staticRenderFns:[]};var I=o("Z0/y")(v,g,!1,function(t){o("y1eR")},null,null).exports,w={data:function(){return{roomName:"",roomId:"",roomCurrentDetail:null,userId:"",userInfo:null,txtToServer:"",mesModel:[],isUsingBrowser:!0}},methods:{roomCurrentChange:function(t){this.roomName&&this.socketRoomLeave(),this.roomName=t,this.getRoomId(t),this.mesModel=[]},getRoomId:function(t){var e=this,o={roomName:t},s=window.SYRESOURCE.room;this.$http.get(s,{params:o}).then(function(t){200===t.body.code?e.getRoomIdSucceed(t):e.errHandle(t)},function(t){})},getRoomIdSucceed:function(t){this.roomCurrentDetail=t.body.data,this.roomId=t.body.data.roomId,this.socketRoomJoin()},sendMess:function(){!this.roomName&&alert("请先选择左侧列表中的房间，才能发送信息！"),this.txtToServer&&this.socketTxtSend()},socketRoomJoin:function(){var t={type:"roomJoin",roomId:this.roomId,data:{userId:this.userId,nickname:this.userInfo.nickname}};window.SYRESOURCE.chatSocket.emit("clientMes",t)},socketRoomLeave:function(){var t={type:"roomLeave",roomId:this.roomId};window.SYRESOURCE.chatSocket.emit("clientMes",t)},socketTxtSend:function(){var t={type:"chatTxt",roomId:this.roomId,data:{txt:this.txtToServer}};window.SYRESOURCE.chatSocket.emit("clientMes",t)},socketMesGet:function(t){this.socketMesGetHandle(t)},socketMesGetHandle:function(t){switch(this.socketMesShow(t),t.type){case"chatTxt":return this.txtToServer="";case"roomJoin":return this._$eventBus.$emit("userIn",t.userInfo.userId,this.roomId);case"roomLeave":return this._$eventBus.$emit("userOut",t.userInfo.userId);default:return}},socketMesShow:function(t){var e=new Date,o=t.data||{},s={type:t.type,userId:t.userInfo.userId,nickname:t.userInfo.nickname,moment:e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" "+e.getHours()+":"+e.getMinutes(),txt:o.txt,img:o.img};this.mesModel.push(s),this.scrollHandle()},scrollHandle:function(){var t=this.$refs.contentBoard,e=t.scrollTop,o=t.clientHeight,s=t.scrollHeight;parseInt(s-e-o)<5&&!document.hidden&&this.isUsingBrowser&&this.$nextTick(function(){t.scrollTop=t.scrollHeight-o})},errHandle:function(t){console.error(t.body.data)},socketDisconnect:function(){this.socketRoomLeave(),window.SYRESOURCE.chatSocket.disconnect(),window.SYRESOURCE.chatSocket=null},isUsingBrowserFalse:function(){this.isUsingBrowser=!1},isUsingBrowserTrue:function(){this.isUsingBrowser=!0}},mounted:function(){var t=this,e=JSON.parse(sessionStorage.getItem("userInfo"));this.userInfo=e,this.userId=e.userId,this._$eventBus.$on("roomChecked",this.roomCurrentChange),this._$eventBus.$on("chatSocketConnected",function(){window.SYRESOURCE.chatSocket.on("serverMes",t.socketMesGet)}),window.addEventListener("unload",this.socketDisconnect),document.addEventListener("mouseleave",this.isUsingBrowserFalse),document.addEventListener("mouseenter",this.isUsingBrowserTrue)},destroyed:function(){this.socketDisconnect(),window.removeEventListener("unload",this.socketDisconnect),document.removeEventListener("mouseleave",this.isUsingBrowserFalse),document.removeEventListener("mouseenter",this.isUsingBrowserTrue)}},C={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"chat-room"},[o("h1",{staticClass:"tit",attrs:{id:"room-tit"},domProps:{textContent:t._s(t.roomName)}}),t._v(" "),o("div",{ref:"contentBoard",staticClass:"content"},t._l(t.mesModel,function(e){return o("p",{staticClass:"chat-line"},["chatTxt"===e.type?o("transition-group",[o("span",{key:"member",staticClass:"chat-moment chat-member",class:{"chat-moment-me":e.userId==t.userId},domProps:{textContent:t._s(e.nickname)}}),t._v(" "),o("span",{key:"mess",staticClass:"chat-mess",class:{"chat-mess-me":e.userId==t.userId},attrs:{title:e.moment},domProps:{textContent:t._s(e.txt)}})]):t._e(),t._v(" "),"roomJoin"===e.type?o("transition",[o("span",{staticClass:"chat-in",attrs:{title:e.moment},domProps:{textContent:t._s(e.nickname+" 进入了房间")}})]):t._e(),t._v(" "),"roomLeave"===e.type?o("transition",[o("span",{staticClass:"chat-out",attrs:{title:e.moment},domProps:{textContent:t._s(e.nickname+" 离开了房间")}})]):t._e()],1)})),t._v(" "),o("form",{staticClass:"tool"},[o("div",{staticClass:"write-board"},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.txtToServer,expression:"txtToServer",modifiers:{trim:!0}}],staticClass:"write-box",attrs:{type:"text",name:"write"},domProps:{value:t.txtToServer},on:{keypress:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;e.preventDefault(),t.sendMess(e)},input:function(e){e.target.composing||(t.txtToServer=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),o("span",{staticClass:"send pointer",on:{click:t.sendMess}},[t._v("发送")])])])},staticRenderFns:[]};var _=o("Z0/y")(w,C,!1,function(t){o("PKvn")},null,null).exports,S={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]},R=o("Z0/y")({data:function(){return{}}},S,!1,null,null,null).exports,y={data:function(){return{curListItem:null,roomList:[]}},methods:{getUserRoomList:function(){var t=this,e=JSON.parse(sessionStorage.getItem("userInfo")),o=window.SYRESOURCE.userRooms;this.$http.get(o,{params:e}).then(function(e){200===e.body.code?t.showUserRoomList(e):t.errHandle()},function(t){})},showUserRoomList:function(t){var e=t.body.data||[];this.roomList=e.map(function(t){return{roomName:t,isActive:!1}}).reverse()},errHandle:function(){},roomCheck:function(t){this.curListItem!==t&&(this.curListItem&&(this.curListItem.isActive=!1),this.curListItem=t,t.isActive=!0,this._$eventBus.$emit("roomChecked",t.roomName))}},mounted:function(){this.getUserRoomList(),this._$eventBus.$on("roomCreated",this.getUserRoomList),this._$eventBus.$on("roomJoined",this.getUserRoomList)}},k={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ul",{staticClass:"room-list"},t._l(t.roomList,function(e){return o("li",{staticClass:"room-list-item",on:{click:function(o){t.roomCheck(e)}}},[o("span",{staticClass:"room-list-item-content",class:{active:e.isActive},attrs:{title:e.roomName},domProps:{textContent:t._s(e.roomName)}})])}))},staticRenderFns:[]};var L=o("Z0/y")(y,k,!1,function(t){o("VyVk")},null,null).exports,N={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"prompt-part"},[e("input",{staticClass:"prompt-part-input",attrs:{type:"text"}}),e("button",{staticClass:"prompt-part-btn"},[this._v("确定")])])}]};var x=o("Z0/y")({data:function(){return{}}},N,!1,function(t){o("haKB")},null,null).exports,b={components:{inputPart:x},data:function(){return{roomName:"",roomPassword:"",toolList:[{tit:"加入",isActive:!1,action:"search"},{tit:"创建",isActive:!1,action:"create"}],curToolListItem:null,searchResultList:[],curResultItem:null,isShowResultForm:!1,userInfo:null}},methods:{toolSelect:function(t){this.curItemDerective(),this.curToolListItem=t,t.isActive=!0,this.searchResultList=[]},curItemDerective:function(){this.curToolListItem&&(this.curToolListItem.isActive=!1),this.curToolListItem=null,this.roomName=null,this.roomPassword=null,this.searchResultList=[],this.isShowResultForm=!1,this.curResultItem&&(this.curResultItem.isActive=!1),this.curResultItem=null},isShowCalc:function(t){return this.curToolListItem&&this.curToolListItem.action===t},toolFormConfirm:function(){switch(this.curToolListItem.action){case"create":return this.roomCreate();case"search":return this.roomSearch();default:return!1}},roomCreate:function(){var t=this;if(!this.roomPassword||!this.roomName)return!1;var e=window.SYRESOURCE.rooms,o={roomPassword:this.roomPassword,roomName:this.roomName,userId:this.userInfo.userId};this.$http.post(e,{params:o}).then(function(e){t.roomCreateHandle(e).then(t.roomCreateSucceed,t.roomCreateFailed)},function(t){})},roomCreateHandle:function(t){return new d.a(function(e,o){var s;200===(s=t.body.code)?e():o(s)})},roomCreateSucceed:function(){this._$eventBus.$emit("roomCreated")},roomCreateFailed:function(t){alert("新建失败！")},roomSearch:function(){var t=this;if(!this.roomName)return!1;var e=window.SYRESOURCE.rooms,o={roomName:this.roomName};this.$http.get(e,{params:o}).then(function(e){t.roomSearchHandle(e).then(t.roomSearchSucceed,t.roomSearchFailed)},function(t){})},roomSearchHandle:function(t){return new d.a(function(e,o){var s;200===(s=t.body.code)?e(t):o(s)})},roomSearchSucceed:function(t){this.searchResultList=t.body.data},roomSearchFailed:function(t){alert("搜索失败！")},joinRoomClickHandle:function(t){this.curResultItem!==t&&(this.curResultItem&&(this.curResultItem.isActive=!1),this.curResultItem=t,t.isActive=!0,this.isShowResultForm=!0)},roomJoinComfirm:function(){var t=this;if(!this.roomPassword)return!1;var e=window.SYRESOURCE.roomMembers,o={roomPassword:this.roomPassword,roomName:this.curResultItem.roomName,userId:this.userInfo.userId};this.$http.post(e,{params:o}).then(function(e){t.roomCreateHandle(e).then(200===e.body.code?t._$eventBus.$emit("roomJoined"):alert("加入房间失败！"))},function(t){})}},mounted:function(){this.userInfo=JSON.parse(sessionStorage.getItem("userInfo"))}},$={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"tool-part",on:{mouseleave:t.curItemDerective}},[o("ul",{staticClass:"tool-part-list"},t._l(t.toolList,function(e){return o("li",{staticClass:"tool-part-list-item",class:{active:e.isActive}},[o("span",{domProps:{textContent:t._s(e.tit)},on:{click:function(o){t.toolSelect(e,o)}}})])})),t._v(" "),o("div",{staticClass:"tool-part-form-box"},[o("form",{key:"search",staticClass:"tool-part-form"},[o("div",[o("transition",{attrs:{name:"shrink"}},[o("input",{directives:[{name:"show",rawName:"v-show",value:t.curToolListItem,expression:"curToolListItem"},{name:"model",rawName:"v-model.trim",value:t.roomName,expression:"roomName",modifiers:{trim:!0}}],staticClass:"tool-part-input",attrs:{type:"text",placeholder:"房间名"},domProps:{value:t.roomName},on:{input:function(e){e.target.composing||(t.roomName=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])],1),t._v(" "),o("div",[o("transition",{attrs:{name:"shrink"}},[o("input",{directives:[{name:"show",rawName:"v-show",value:t.isShowCalc("create"),expression:"isShowCalc('create')"},{name:"model",rawName:"v-model.trim",value:t.roomPassword,expression:"roomPassword",modifiers:{trim:!0}}],staticClass:"tool-part-input",attrs:{type:"text",placeholder:"房间口令"},domProps:{value:t.roomPassword},on:{input:function(e){e.target.composing||(t.roomPassword=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])],1),t._v(" "),o("div",{staticClass:"tool-part-form-confirm"},[o("a",{directives:[{name:"show",rawName:"v-show",value:t.curToolListItem,expression:"curToolListItem"}],staticClass:"tool-part-confirm-btn",on:{click:t.toolFormConfirm}},[t._v("确定")])])]),t._v(" "),o("ul",{staticClass:"tool-part-result"},[t.isShowResultForm?o("li",{staticClass:"tool-part-result-form"},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.roomPassword,expression:"roomPassword",modifiers:{trim:!0}}],staticClass:"tool-part-result-input",attrs:{type:"text",placeholder:"请输入房间口令"},domProps:{value:t.roomPassword},on:{input:function(e){e.target.composing||(t.roomPassword=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),o("span",{staticClass:"tool-part-result-btn",on:{click:t.roomJoinComfirm}},[t._v("确定")])]):t._e(),t._v(" "),t._l(t.searchResultList,function(e){return o("li",{staticClass:"tool-part-result-item",class:{"result-active":e.isActive},domProps:{textContent:t._s(e.roomName)},on:{click:function(o){t.joinRoomClickHandle(e)}}})})],2)])])},staticRenderFns:[]};var P=o("Z0/y")(b,$,!1,function(t){o("prJy")},null,null).exports,U={components:{inputPart:x},data:function(){return{roomName:"",roomPassword:"",toolList:[{tit:"个人信息",isActive:!1,action:"userInfo"},{tit:"登录/注册",isActive:!1,action:"login"}],curToolListItem:null,searchResultList:[],curResultItem:null,isShowResultForm:!1,userInfo:null}},methods:{toolSelect:function(t){if("login"===t.action)return this.$router.push({name:"signIn"});this.curItemDerective(),this.curToolListItem=t,t.isActive=!0},curItemDerective:function(){this.curToolListItem&&(this.curToolListItem.isActive=!1),this.curToolListItem=null},isShowCalc:function(t){return this.curToolListItem&&this.curToolListItem.action===t}},created:function(){this.userInfo=JSON.parse(sessionStorage.getItem("userInfo"))||{}},mounted:function(){}},E={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"tool-part user-tool-part",on:{mouseleave:t.curItemDerective}},[o("ul",{staticClass:"tool-part-list"},t._l(t.toolList,function(e){return o("li",{staticClass:"tool-part-list-item",class:{active:e.isActive}},[o("span",{domProps:{textContent:t._s(e.tit)},on:{click:function(o){t.toolSelect(e,o)}}})])})),t._v(" "),o("div",{staticClass:"tool-part-form-box"},[o("form",{key:"search",staticClass:"tool-part-form"},[o("div",[o("transition",{attrs:{name:"shrink"}},[o("input",{directives:[{name:"show",rawName:"v-show",value:t.curToolListItem,expression:"curToolListItem"},{name:"model",rawName:"v-model.trim",value:t.roomName,expression:"roomName",modifiers:{trim:!0}}],key:"userId",staticClass:"tool-part-input",attrs:{type:"text",placeholder:"账号："+(t.userInfo.userId||""),disabled:"disabled"},domProps:{value:t.roomName},on:{input:function(e){e.target.composing||(t.roomName=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])],1),t._v(" "),o("div",[o("transition",{attrs:{name:"shrink"}},[o("input",{directives:[{name:"show",rawName:"v-show",value:t.curToolListItem,expression:"curToolListItem"},{name:"model",rawName:"v-model.trim",value:t.roomName,expression:"roomName",modifiers:{trim:!0}}],key:"nickname",staticClass:"tool-part-input",attrs:{type:"text",placeholder:"用户名："+(t.userInfo.nickname||""),disabled:"disabled"},domProps:{value:t.roomName},on:{input:function(e){e.target.composing||(t.roomName=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])],1),t._v(" "),o("div",[o("transition",{attrs:{name:"shrink"}},[o("input",{directives:[{name:"show",rawName:"v-show",value:t.curToolListItem,expression:"curToolListItem"},{name:"model",rawName:"v-model.trim",value:t.roomName,expression:"roomName",modifiers:{trim:!0}}],key:"descript",staticClass:"tool-part-input",attrs:{type:"text",placeholder:"座右铭："+(t.userInfo.descript||""),disabled:"disabled"},domProps:{value:t.roomName},on:{input:function(e){e.target.composing||(t.roomName=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])],1)]),t._v(" "),o("ul",{staticClass:"tool-part-result"},[t.isShowResultForm?o("li",{staticClass:"tool-part-result-form"},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.roomPassword,expression:"roomPassword",modifiers:{trim:!0}}],staticClass:"tool-part-result-input",attrs:{type:"text",placeholder:"请输入房间口令"},domProps:{value:t.roomPassword},on:{input:function(e){e.target.composing||(t.roomPassword=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),o("span",{staticClass:"tool-part-result-btn",on:{click:t.roomJoinComfirm}},[t._v("确定")])]):t._e(),t._v(" "),t._l(t.searchResultList,function(e){return o("li",{staticClass:"tool-part-result-item",class:{"result-active":e.isActive},domProps:{textContent:t._s(e.roomName)},on:{click:function(o){t.joinRoomClickHandle(e)}}})})],2)])])},staticRenderFns:[]};var T=o("Z0/y")(U,E,!1,function(t){o("VAJ4")},null,null).exports,F=o("HzJ8"),A=o.n(F),H={data:function(){return{userList:[],roleType:{0:"房主"},userSelfInfo:null}},methods:{getRoomUserList:function(t){var e=this,o={roomId:t},s=window.SYRESOURCE.roomMembers;this.$http.get(s,{params:o}).then(function(t){200===t.body.code?e.succeedHandle(t):e.errHandle()},function(t){})},showRoomUserList:function(t){var e=this,o=t.body.data||[];this.userList=o.map(function(t){return t.isInRoom=t.userId===e.userSelfInfo.userId,t})},succeedHandle:function(t){t.body.data[0]&&(t.body.data[0].role=this.roleType[0]),this.userList=t.body.data},errHandle:function(){},userFind:function(t){var e=!0,o=!1,s=void 0;try{for(var n,i=A()(this.userList);!(e=(n=i.next()).done);e=!0){var r=n.value;if(r.userId===t)return r}}catch(t){o=!0,s=t}finally{try{!e&&i.return&&i.return()}finally{if(o)throw s}}},userIn:function(t,e){var o=void 0;if(t===this.userSelfInfo.userId)return this.getRoomUserList(e);(o=this.userFind(t))?o.isInRoom=!0:this.getRoomUserList(e)},userOut:function(t){t!==this.userSelfInfo.userId&&(this.userFind(t).isInRoom=!1)}},mounted:function(){var t=JSON.parse(sessionStorage.getItem("userInfo"));this.userSelfInfo=t,this._$eventBus.$on("userIn",this.userIn),this._$eventBus.$on("userOut",this.userOut)}},M={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ul",{staticClass:"user-list"},t._l(t.userList,function(e){return o("li",{staticClass:"user-list-item"},[o("span",{staticClass:"user-list-item-content",class:{"user-list-item-inline":e.isInRoom},attrs:{title:e.nickname},domProps:{textContent:t._s(e.nickname)}}),t._v(" "),o("span",{staticClass:"user-list-item-role",domProps:{textContent:t._s(e.role)}})])}))},staticRenderFns:[]};var B={components:{chatPart:_,navPart:R,roomListPart:L,roomToolPart:P,userToolPart:T,userListPart:o("Z0/y")(H,M,!1,function(t){o("Gq62")},null,null).exports},data:function(){return{}},methods:{bodyResize:function(){document.querySelector("body").style.height=window.innerHeight+"px"}},mounted:function(){this.bodyResize(),window.addEventListener("resize",this.bodyResize),window.SYRESOURCE.chatSocket=io.connect(),this._$eventBus.$emit("chatSocketConnected")},destroyed:function(){this._$eventBus.$off()}},O={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home"},[e("div",{staticClass:"home-room-list"},[e("roomToolPart"),this._v(" "),e("roomListPart")],1),this._v(" "),e("div",{staticClass:"home-room-chatting"},[e("div",{staticClass:"home-room-chatting-list"}),this._v(" "),e("div",{staticClass:"home-room-chatting-current"},[e("chatPart")],1)]),this._v(" "),e("div",{staticClass:"home-room-member"},[e("userToolPart"),this._v(" "),e("userListPart")],1)])},staticRenderFns:[]};var J=o("Z0/y")(B,O,!1,function(t){o("gdUe")},null,null).exports;s.a.use(r.a);var Y=new r.a({routes:[{path:"/",redirect:"/user"},{path:"/user",name:"user",component:u,redirect:"/user/signIn",children:[{path:"signIn",name:"signIn",component:p},{path:"signUp",name:"signUp",component:I}]},{path:"/home",name:"home",component:J}]}),Z=o("lLMz");s.a.config.productionTip=!1,s.a.use(Z.a),s.a.use({install:function(t){t.prototype._$eventBus=new t}}),new s.a({el:"#app",router:Y,components:{App:i},template:"<App/>"}),window.addEventListener("unload",function(){})},PKvn:function(t,e){},VAJ4:function(t,e){},VyVk:function(t,e){},gdUe:function(t,e){},haKB:function(t,e){},iaH8:function(t,e){},jFyt:function(t,e){},prJy:function(t,e){},y1eR:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.623da816b808af79dcbc.js.map